# README: Morphosynthesis
Программа генерирует словоформы для существительных, прилагательных, местоимения и числительных
Написан на python3, главный скрипт: gen_morph.py -- его запускаем для всех форм.

# Запуск 
из Win:
.../normalizer set PYTHONPATH=.
.../normalizer python MorphoGen/gen_morph.py --gram="Pos=ADJ;Number=Plur;Case=Acc;Animacy=Inan" --lemma="синий"

из Ubuntu:
.../normalizer PYTHONPATH=. python3 MorphoGen/gen_morph.py --gram="Pos=ADJ;Number=Plur;Case=Acc;Animacy=Inan" --lemma="синий"


# Тестирование, запуск в консоли
На вход скрипту подаётся лемма и набор желаемых морфологических тегов, соединенных ';'.
Теги указываются в соответствии с форматом UD: напр. Gender=Masc.

Указание части речи обязательно и гарантирует точное определение части речи алгоритмом:
Формат: Pos=NOUN (или VERB, ADJ, NUM, другие части речи не изменяются, причастия - часть глагола, см. документацию к Universal Dependencies)

### Теги для существительных:
Число: Number=(Sing|Plur)
Падеж: Case=(Nom|Gen|Dat|Acc|Ins|Loc|Voc)
ОдушевленностьЖ: Animacy=(Anim|Inan)

### Теги для прилагательных:
Число: Number=(Sing|Plur)
Падеж: Case=(Nom|Gen|Dat|Acc|Ins|Loc|Voc)
Род: Gender=(Masc|Fem|Neut)
Одушевлённость: Animacy=(Anim|Inan)
Краткость (по умолчанию форма полная): Variant=Short
Сравнение: Degree=Cmp

### Теги для глаголов и причастий:
Aspect=(Perf|Imp)
VerbForm=(Fin|Conv)
Number=(Sing|Plur)
Mood=(Ind|Imp) (только для VerbForm=Fin)
Tense=(Past|Pres|Fut) (только для Mood=Ind или VerbForm=(Conv|Part))
Person=(1|2|3) (только для Tense=Pres или Tense=Fut)
Gender=(Masc|Fem|Neut) (только для Number=Sing и (Tense=Past или VerbForm=Part))
Case=(Nom|Gen|Dat|Acc|Ins|Loc|Voc) (только для VerbForm=Part)


# Примеры запросов для форм разных ЧР:
При отсутствии некоторого тега из необходимых (род для прилагательных ед.ч.) будет поставлено "значение по умолчанию" (именительный падеж, единственное число, мужской род, ...). При наличии "лишнего" тега (число для числительных) - он будет проигнорирован.

### Существительные: тег падежа и числа через ';' в любом порядке
--gram='POS=NOUN;Number=Plur;Case=Loc' --lemma='домик'

### Прилагательные:
Полные формы:

в ед.ч.: тег падежа, рода и числа через ';' в любом порядке
--lemma='POS=ADJ;высокий' --gram='Gender=Fem;Number=Sing;Case=Ins'

во мн.ч.: тег падежа и числа через ';' в любом порядке
--lemma='высокий' --gram='POS=ADJ;Number=Plur;Case=Ins'

Краткие формы:
в ед.ч.: тег формы, рода и числа через ';' в любом порядке
 --lemma='высокий' --gram='POS=ADJ;Variant=Short;Gender=Fem;Number=Sing'

во мн.ч.: тег формы и числа через ';' в любом порядке
--lemma='высокий' --gram='POS=ADJ;Variant=Short;Number=Plur'

Сравнительная степень
--lemma='высокий' --gram='POS=ADJ;Degree=Cmp'


### Глаголы:
--lemma='драть' --gram='Pos=VERB;VerbForm=Fin;Mood=Ind;Tense=Past;Number=Sing;Gender=Masc;Aspect=Imp'
--lemma='драть' --gram='Pos=VERB;VerbForm=Part;Tense=Past;Number=Sing;Gender=Masc;Aspect=Imp;Case=Dat'



# Назначение файлов:

lemmas.txt -- основной словарь существительных с приписанным типом склонения (e.g., узел;2тв-).
GPron.txt -- словарь исключений; включает как существительные, так и местоимения (почти все) и некоторые числительные. Формат UD: e.g., платью (Pos=NOUN;G=Neut;Animacy=Inan;Case=Dat;Number=Sing).
morph_const.txt -- словарь неизменяемых существительных, выписаны списком.
gostia.txt -- список слов на -ья, являющихся исключениями из правила "статья-статей" из-за другого ударения (e.g., "гостья-гостий"), выписаны списком.
d_proper.txt -- вторая часть словаря существительных, состоящая из имён собственных (имён и названий локаций); в коде склеивается с lemmas.txt.
sib_e_ending.txt -- слова, которые являются исключениями из правила "багаж-багажом" из-за другого ударения (e.g., "антураж-антуражем").
zero_genpl.txt -- слова с нулевым окончанием в GenPlur (e.g., ботинок-ботинок).


# Цифры, буквы и знаки в обозначениях типов склонения и спряжения:

Цифра - тип парадигмы: набор флексий, т.е. первое, второе, третье склонение,...
Буквы:
т - (основа на) твердый
м - (основа на) мягкий
о - одушевленное
в - вещь
й - основа на й
й - основа на ц
а - окончание -а в им.п. мн.ч. (доктора)
с - средний род (в некоторых типах)
ь - косвенная основа с ь (братьев, колосьев, звеньев)
фм - фамилия мужская
фж - фамилия женская
отчм - отчество мужксое
отчж - отчество женское

Отдельно (to be reorganized):
8с - страны 
8с+ - страны в Pl.Tantum
11 - Pl.Tantum


# Техничесике подробности вкратце
1. Порождение форм существительных (основной скрипт noun.py)

По типу склонения (см. parads.py) производится стемминг, и к основе приписывается одно из набора окончаний для этого типа склонения с учётом нюансов (e.g., перехода "ы" в "и" после шипящих; полный список см. morphon.py).

2. Порождение форм прилагательных (основной скрипт adjective.py)

Автоматически определяем прилагательные, смотря на окончание лемм -ый, -ий, -ой. Затем производится стемминг, и порождается нужная форма с учётом нюансов. Во мн.ч. значение рода не прописывается.

3. Порождение форм числительных (словарь GPron)

Количественные числительные записаны в словарь GPron со всеми формами в формате UD (см. ниже пример формата); порядковые числительные обрабатываются, как прилагательные.


# Принцип работы тестов:

Тест test.py для существительных проходит по словарям со всеми формами в формате UD, берёт каждый набор тэгов и лемму, даёт их морфосинтезу, а потом сравнивает полученный результат со словоформой из словаря. Если формы не совпадают, то выдача помещается в файл log_mistakes.txt. Слова, для которых ничего не нашлось в lemmas + они не задетектировались по суффиксам (e.g., все слова с суффиксом -ость детектируются автоматически, даже при отсутствии в lemmas), помещаются в файл not_found.txt.
Скрипт autotest.py используется для автотестов, принцип тот же, выдается assert
